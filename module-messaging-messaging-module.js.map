{"version":3,"sources":["./src/app/module/messaging/messaging.module.ts","./src/app/module/messaging/messaging-routing.module.ts","./src/app/module/messaging/message-box/messageBox.component.ts","./src/app/module/messaging/message-box/messageBox.component.html","./src/app/module/messaging/messaging.component.ts","./src/app/module/messaging/messaging.component.html"],"names":[],"mappings":"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","file":"module-messaging-messaging-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { MessagingRoutingModule } from './messaging-routing.module';\r\nimport { MessagingComponent } from './messaging.component';\r\nimport { MessageBoxComponent } from './message-box/messageBox.component';\r\n\r\nimport { sharedModule } from '../../shared.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        ReactiveFormsModule,\r\n        MessagingRoutingModule,\r\n        sharedModule\r\n    ],\r\n    declarations: [\r\n        MessagingComponent,\r\n        MessageBoxComponent\r\n    ]\r\n})\r\nexport class MessagingModule { }","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MessagingComponent } from './messaging.component';\r\nimport { MessageBoxComponent } from './message-box/messageBox.component';\r\n\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '', component: MessagingComponent,\r\n        children: [\r\n            { path: ':id', component: MessageBoxComponent }\r\n        ]      \r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class MessagingRoutingModule { }","import { Component, OnInit, ViewEncapsulation, ElementRef, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { chatService, AccountService, FileUploadService } from '../../../_services';\n\nimport { User } from '../../../_models';\nimport { first } from 'rxjs/operators';\nimport { environment } from '../../../../environments/environment';\n\nimport { createAvatar } from '@dicebear/avatars';\nimport * as styleAvatar from '@dicebear/pixel-art';\n\n@Component({\n  selector: 'app-MessageBox',\n  templateUrl: './messageBox.component.html'\n})\nexport class MessageBoxComponent implements OnInit {\n  public href: string = \"\";\n  form: FormGroup;\n  dialog = null;\n  beforemessageId = [];\n  sameSender = false;\n  user: User;\n  messagingID: string;\n  @ViewChild('chat_box', { static: false }) chat_box: ElementRef;\n\n  constructor(\n    private route: ActivatedRoute, \n    private AccountService: AccountService, \n    private formBuilder: FormBuilder, \n    private router: Router, \n    private chat: chatService,\n    private FileUploadService: FileUploadService\n  ) { }\n\n  ngOnInit(): void {\n    this.messagingID = this.route.snapshot.params['id'];\n    this.AccountService.user.subscribe(x => this.user = x);\n    this.href = this.router.url;\n    this.form = this.formBuilder.group({\n        message: ['', Validators.required],\n    });\n\n    this.chat.getPm(this.messagingID, this.user.id)\n      .pipe(first())\n      .subscribe(message => {\n        this.dialog = message;\n        for (let i = 0; i < this.dialog.messages.length; i++) {\n          let sameSender = false;\n\n          if(this.beforemessageId[this.beforemessageId.length - 1] == this.dialog.messages[i].from) {\n            sameSender = true;\n          } else {\n            sameSender = false;\n          }\n          this.beforemessageId.push(this.dialog.messages[i].from);\n          this.dialog.messages[i]['sameSender'] = sameSender;\n\n          this.FileUploadService.getAvatar(this.dialog.messages[i].from_user.id)\n          .pipe(first())\n          .subscribe(avatar => {\n            const svgAvatar = createAvatar(styleAvatar, {\n              seed: this.dialog.messages[i].from_user.username,\n              backgroundColor: '#868889',\n            });\n\n            if(avatar != '') {\n              this.dialog.messages[i].from_user['avatar'] = environment.apiUrl+avatar;\n            } else {\n              this.dialog.messages[i].from_user['avatar'] = '';\n              this.dialog.messages[i].from_user['svg'] = svgAvatar;\n            }\n\n            this.chat_box.nativeElement.scrollTop = this.chat_box.nativeElement.scrollHeight;\n          });\n        }\n      });\n\n    this.chat.messages.subscribe(msg => {\n        let sameSender = false;\n        if(this.beforemessageId[this.beforemessageId.length - 1] == msg.from) {\n          sameSender = true;\n        } else {\n          sameSender = false;\n        }\n        this.beforemessageId.push(msg.from);\n        msg['sameSender'] = sameSender;\n\n        this.AccountService.getById(msg.from)\n          .pipe(first())\n          .subscribe(user => {\n            this.FileUploadService.getAvatar(user.id)\n            .pipe(first())\n            .subscribe(avatar => {\n              const svgAvatar = createAvatar(styleAvatar, {\n                seed: user.username,\n                backgroundColor: '#868889',\n              });\n\n              if(avatar != '') {\n                user['avatar'] = environment.apiUrl+avatar;\n              } else {\n                user['avatar'] = '';\n                user['svg'] = svgAvatar;\n              }\n            });\n            msg['from_user'] = user;\n          });\n\n      this.dialog.messages.push(msg);\n      this.chat_box.nativeElement.scrollTop = this.chat_box.nativeElement.scrollHeight;\n    });\n  }\n\n  get f() { return this.form.controls; }\n\n  onSubmit() {\n    let text = this.form.get('message').value;\n    let sameSender = false;\n    this.chat.sendMsg({ text: text, to: this.messagingID, from: this.user.id, dialog: this.dialog.id });\n    this.f['message'].setValue('');\n    if(this.dialog.messages[this.dialog.messages.length - 1].from_user.id == this.user.id) {\n      sameSender = true;\n    } else {\n      sameSender = false;\n    }\n\n    this.dialog.messages.push({text: text, from_user: this.user, sameSender: sameSender});\n    setTimeout(() => { this.chat_box.nativeElement.scrollTop = this.chat_box.nativeElement.scrollHeight; }, 50);\n  }\n\n}\n","<ol #chat_box class=\"messages\">\r\n\t<li [ngClass]=\"{ 'space': !message.sameSender }\" *ngFor=\"let message of dialog?.messages; let i = index;\">\r\n\t\t<div class=\"useravatar\">\r\n            <img *ngIf=\"!message.sameSender && message.from_user.avatar != ''\" class=\"useravatar\" src=\"{{message.from_user.avatar}}\">\r\n            <div *ngIf=\"!message.sameSender && message.from_user.avatar == ''\" [innerHTML]=\"message.from_user.svg | safeHtml\" class=\"useravatar avatarSvg\">\r\n            </div>\r\n\t\t</div>\r\n\t\t<div class=\"msg-content\">\r\n\t\t\t<div *ngIf=\"!message.sameSender\" class=\"heading\">\r\n\t\t\t\t<span class=\"username\">{{message.from_user.username}}<b>Modérateur</b></span>\r\n\t\t\t\t<span class=\"time\">Hier à 13:30</span>\r\n\t\t\t</div>\r\n\t\t\t<p>\r\n\t\t\t\t{{message.text}}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</li>\r\n</ol>\r\n<form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\r\n\t<input type=\"text\" placeholder=\"Envoyer un message\" formControlName=\"message\">\r\n</form>","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\nimport { chatService, AccountService, FileUploadService } from '../../_services';\n\nimport { User } from '../../_models';\nimport { first } from 'rxjs/operators';\nimport { environment } from '../../../environments/environment';\n\nimport { createAvatar } from '@dicebear/avatars';\nimport * as styleAvatar from '@dicebear/pixel-art';\n\n@Component({\n  selector: 'app-messaging',\n  templateUrl: './messaging.component.html',\n  styleUrls: ['./messaging.component.less'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class MessagingComponent implements OnInit {\n  public href: string = \"\";\n  form: FormGroup;\n  messages = [];\n  user: User;\n  messagingID = 0;\n  fetchLast = null;\n  connected_list = null;\n  constructor(\n    private route: ActivatedRoute,\n    private AccountService: AccountService, \n    private formBuilder: FormBuilder, \n    private router: Router, \n    private chat: chatService,\n    private FileUploadService: FileUploadService\n  ) {\n    this.AccountService.user.subscribe(x => this.user = x); \n    this.router.events.subscribe((url:any) => this.href = url.url);\n\n    this.chat.getConnectedList();\n  }\n\n  ngOnInit(): void {\n    this.chat.fetchLast(this.user.id)\n      .pipe(first())\n      .subscribe(fetch => {\n        this.fetchLast = fetch;\n        for (let i = 0; i < this.fetchLast.length; i++) {\n          if(this.fetchLast[i].dialog_user1.id != this.user.id) {\n            this.fetchLast[i]['user'] = this.fetchLast[i].dialog_user1;\n          } else {\n            this.fetchLast[i]['user'] = this.fetchLast[i].dialog_user2;\n          }\n          this.FileUploadService.getAvatar(this.fetchLast[i]['user'].id)\n            .pipe(first())\n            .subscribe(avatar => {\n                const svgAvatar = createAvatar(styleAvatar, {\n                    seed: this.fetchLast[i].user.username,\n                    backgroundColor: '#868889',\n                });\n\n                if(avatar != '') {\n                    this.fetchLast[i].user['avatar'] = environment.apiUrl+avatar;\n                } else {\n                    this.fetchLast[i].user['avatar'] = '';\n                    this.fetchLast[i].user['svg'] = svgAvatar;\n                }\n            });\n\n          this.fetchLast[i]['connected'] = false;\n          this.chat.socketConnected(this.fetchLast[i]['user'].id);\n        }\n      });\n\n      this.chat.connected.subscribe(online => {\n        let objIndex = this.fetchLast.findIndex((obj => obj.user.id == online.id));\n        \n        if(objIndex != -1) {\n          this.fetchLast[objIndex].connected = online.logged;\n        }\n      });\n\n      this.chat.connected_list.subscribe(connected => {\n        this.connected_list = connected;\n        for(let i = 0; i < this.connected_list.length; i++) {\n          if(this.connected_list[i] == this.user.id) {\n            this.connected_list.splice(i, 1);\n          } else {\n            this.AccountService.getById(this.connected_list[i])\n              .pipe(first())\n              .subscribe(userInfo => {\n               this.FileUploadService.getAvatar(userInfo.id)\n                  .pipe(first())\n                  .subscribe(avatar => {\n                      const svgAvatar = createAvatar(styleAvatar, {\n                          seed: userInfo.username,\n                          backgroundColor: '#868889',\n                      });\n\n                      if(avatar != '') {\n                          userInfo['avatar'] = environment.apiUrl+avatar;\n                      } else {\n                          userInfo['avatar'] = '';\n                          userInfo['svg'] = svgAvatar;\n                      }\n                  });\n                this.connected_list[i] = userInfo;\n              });\n          }\n        }\n      });\n  }\n\n  ngAfterViewInit(): void {\n    \n  }\n\n}\n","<div class=\"messaging-wrap\">\r\n\t<section class=\"message-section\">\r\n\t\t<div class=\"users\">\r\n\t\t\t<ul>\r\n\t\t\t\t<li class=\"search\">\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"@Un pseudo\">\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<ul>\r\n\t\t\t\t<li *ngFor=\"let fetchUser of fetchLast; let i = index;\" routerLink=\"./{{fetchUser.user.id}}\">\r\n\t\t\t\t\t<img *ngIf=\"fetchUser.user.avatar != ''\" class=\"avatar\" src=\"{{fetchUser.user.avatar}}\">\r\n\t\t\t\t\t<div *ngIf=\"fetchUser.user.avatar == ''\" [innerHTML]=\"fetchUser.user.svg | safeHtml\" class=\"avatar avatarSvg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span class=\"username\">{{fetchUser.user?.username}} <b>Modérateur</b></span>\r\n\t\t\t\t\t<div [ngClass]=\"{ 'online': fetchUser.connected, 'offline': !fetchUser.connected }\" class=\"statut\"></div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"message-box\">\r\n\t\t\t<ng-container *ngIf=\"href == '/messaging'\">\r\n\t\t\t\t<div class=\"connected-list\">\r\n\t\t\t\t\t<h1>Liste des utilisateurs connectés</h1>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li *ngFor=\"let online of connected_list; let i = index;\" class=\"users\" routerLink=\"./{{online.id}}\">\r\n\t\t\t\t\t\t\t<img *ngIf=\"online.avatar != ''\" class=\"avatar\" src=\"{{online.avatar}}\">\r\n\t\t\t\t\t\t\t<div *ngIf=\"online.avatar == ''\" [innerHTML]=\"online.svg | safeHtml\" class=\"avatar avatarSvg\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h2>{{online.username}} <span>Modérateur</span></h2>\r\n\t\t\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t\t\t<li class=\"characters\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"characterContainer\"  style=\"background-image: url('./assets/img/skin/1/2.png');\">\r\n\t\t\t\t\t\t\t\t\t\tJohn Doe\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li class=\"characters\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"characterContainer\"  style=\"background-image: url('./assets/img/skin/1/2.png');\">\r\n\t\t\t\t\t\t\t\t\t\tJohn Doe\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\t\t\t<router-outlet></router-outlet>\r\n\t\t</div>\r\n\t</section>\r\n</div>"],"sourceRoot":"webpack:///"}